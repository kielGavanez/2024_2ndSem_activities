<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        /* div {
            border: 1px solid red;
        } */
        header {
            display: flex;
            justify-content: space-between;
            padding: 2rem;
        }
        footer {
            text-align: center;
            padding: 2rem;
            position: absolute;
            top: 90%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .team {
            margin-top: 1rem;
            height: 465px;
            width: 465px;
            background-color: gray;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            
        }
        .teamdiv{
            gap: 2rem;
            justify-content: center;
                      
        } 
        .teamDisplay{
            display: flex;
            justify-content: center;
        }
        .body {
            display: flex;
            justify-content: center;
            height: 100%;
            gap: 12rem;
        }
        .inputArea {
            display: flex;
            gap: 10px;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: blue;
            color: white;
            border-radius: 5px;
        }
        .button {
            display: flex;
            justify-content: center;
        }
        .inputArea, input{
            width: 100%;
            padding-block: 1rem ;
            border: 0;
            
        }
        input {
            background-color: aqua;
            border-radius: 5px;
            margin-top: 5px;
            text-align: center;
        }
    </style>
</head>
<body>
    <header>
        <h1>Activity2</h1>
        <h1>Buzzer</h1>
    </header>
    <div class="body">
        <div class="teamdiv">
            <div class="inputArea">
                <div>
                    <label for="player1" id="player1">Player 1</label>
                    <input type="text" value="Player 1" id="plyr1N">
                </div>
                <div>
                    <label for="playerKey">Player Key</label>
                    <input type="text" id="plyr1K" value="a">
                </div>
            </div>
            <div class="button">
                <button onclick="ready1()">Ready</button>
            </div>
            <div class="teamDisplay">
                <div class="team" id="team1">
                    <h2 id="p1Box"></h2>
                </div>
            </div>
        </div>
        <div class="teamdiv">
            <div class="inputArea">
                <div>
                    <label for="player2" id="player2">Player 2</label>
                    <input type="text" value="Player 2" id="plyr2N">
                </div>
                <div>
                    <label for="playerKey">Player Key</label>
                    <input type="text" id="plyr2K" value="l">
                </div>
            </div>
            <div class="button">
                <button onclick="ready2()">Ready</button>
            </div>
            <div class="teamDisplay">
                <div class="team" id="team2">
                    <h2 id="p2Box"></h2>
                </div>
            </div>
        </div>
    </div>
    <footer>
        <h1>Made by Kiel Andrew Gavanez</h1>
    </footer>
    

    <script>
        let plyr1N = document.getElementById('plyr1N');
        let plyr2N = document.getElementById('plyr2N');
        let plyr1K = document.getElementById('plyr1K');
        let plyr2K = document.getElementById('plyr2K');
        let team1 = document.getElementById('team1');
        let team2 = document.getElementById('team2');

        let t1 = false
        let t2 = false
        let done = false

        if (localStorage.getItem('plyr1N') != null 
            && localStorage.getItem('plyr1K') != null
            && localStorage.getItem('plyr2N') != null
            && localStorage.getItem('plyr2K') != null) {
                plyr1N.value = localStorage.getItem('plyr1N')
                plyr1K.value = localStorage.getItem('plyr1K')
                plyr2N.value = localStorage.getItem('plyr2N')
                plyr2K.value = localStorage.getItem('plyr2K')

                document.getElementById('p1Box').innerHTML = plyr1N.value
                document.getElementById('p2Box').innerHTML = plyr2N.value
        } else {
                localStorage.setItem('plyr1N', '')
                localStorage.setItem('plyr1K', '')
                localStorage.setItem('plyr2N', '')
                localStorage.setItem('plyr2K', '')
            
                document.getElementById('p1Box').innerHTML = plyr1N.value
                document.getElementById('p2Box').innerHTML = plyr2N.value
        }
        
        plyr1N.addEventListener('input', function (o){
            let max = 10
            let input = this.value

            document.getElementById('p1Box').innerHTML = plyr1N.value
            if (input.length > max) {
                this.value = input.slice(0, max);
                document.getElementById('p1Box').innerHTML = plyr1N.value
            }
        })

        plyr2N.addEventListener('input', function (o){
            let max = 10
            let input = this.value

            document.getElementById('p2Box').innerHTML = plyr2N.value
            if (input.length > max) {
                this.value = input.slice(0, max);
                document.getElementById('p2Box').innerHTML = plyr2N.value
            }
        })

        plyr1K.addEventListener('input', function(i){
            let max = 1
            let input = this.value
            if (plyr1K.value != plyr2K.value) {
                if (input.length > max) {
                    this.value = input.slice(0, max)
                }
            } else {
                alert('Same key is not allowed')
                this.value = 'a'
            }
        })
            
        plyr2K.addEventListener('input', function(i){
            let max = 1
            let input = this.value
            if (plyr2K.value != plyr1K.value) {
                if (input.length > max) {
                    this.value = input.slice(0, max)
                }
            } else {
                alert('Same key is not allowed')
                this.value = 'l '
            }
        })

        document.addEventListener('keypress', function (z){
          if (z.key == 'Enter') {
            plyr1N.blur()
            plyr2N.blur()
            plyr1K.blur()
            plyr2K.blur()
          }  
        })

        document.addEventListener('keydown', function(a){
            if (t1 == true && t2 == true) {
                if (!done) {
                    if (a.key == plyr1K.value) {
                        team1.style.backgroundColor = 'red'
                        done = true
                    } else if (a.key == plyr2K.value) {
                        team2.style.backgroundColor = 'blue'
                        done = true 
                    }
                }
            }
        })

        function ready1() {
            t1 = true
            localStorage.setItem('plyr1N', plyr1N.value)
            localStorage.setItem('plyr1K', plyr1K.value)

            plyr1N.disabled = true
            plyr1K.disabled = true
            plyr1N.style.backgroundColor = 'gray'
            plyr1N.style.color = 'white'
            plyr1K.style.backgroundColor = 'gray'
            plyr1K.style.color = 'white'
        }

        function ready2() {
            t2 = true
            localStorage.setItem('plyr2N', plyr2N.value)
            localStorage.setItem('plyr2K', plyr2K.value)

            plyr2N.disabled = true
            plyr2K.disabled = true
            plyr2N.style.backgroundColor = 'gray'
            plyr2N.style.color = 'white'
            plyr2K.style.backgroundColor = 'gray'
            plyr2K.style.color = 'white'

        }

    </script>
</body>
</html>